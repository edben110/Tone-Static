{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/edben/OneDrive/Desktop/codigos/js/tone-static/lib/DoubleLinkedList.ts"],"sourcesContent":["// lib/DoubleLinkedList.ts\r\nexport type Node<T> = {\r\n  value: T;\r\n  prev: Node<T> | null;\r\n  next: Node<T> | null;\r\n};\r\n\r\nexport class DoubleLinkedList<T> {\r\n  head: Node<T> | null = null;\r\n  tail: Node<T> | null = null;\r\n  length = 0;\r\n\r\n  push(value: T) {\r\n    const node: Node<T> = { value, prev: null, next: null };\r\n    if (!this.tail) {\r\n      this.head = this.tail = node;\r\n    } else {\r\n      node.prev = this.tail;\r\n      this.tail.next = node;\r\n      this.tail = node;\r\n    }\r\n    this.length++;\r\n    return node;\r\n  }\r\n\r\n  remove(node: Node<T>) {\r\n    if (node.prev) node.prev.next = node.next;\r\n    else this.head = node.next;\r\n    if (node.next) node.next.prev = node.prev;\r\n    else this.tail = node.prev;\r\n    node.next = node.prev = null;\r\n    this.length--;\r\n    return node.value;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAOnB,MAAM;IACX,OAAuB,KAAK;IAC5B,OAAuB,KAAK;IAC5B,SAAS,EAAE;IAEX,KAAK,KAAQ,EAAE;QACb,MAAM,OAAgB;YAAE;YAAO,MAAM;YAAM,MAAM;QAAK;QACtD,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG;QAC1B,OAAO;YACL,KAAK,IAAI,GAAG,IAAI,CAAC,IAAI;YACrB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;YACjB,IAAI,CAAC,IAAI,GAAG;QACd;QACA,IAAI,CAAC,MAAM;QACX,OAAO;IACT;IAEA,OAAO,IAAa,EAAE;QACpB,IAAI,KAAK,IAAI,EAAE,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;aACpC,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC1B,IAAI,KAAK,IAAI,EAAE,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;aACpC,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC1B,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG;QACxB,IAAI,CAAC,MAAM;QACX,OAAO,KAAK,KAAK;IACnB;AACF","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/edben/OneDrive/Desktop/codigos/js/tone-static/components/Player.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { DoubleLinkedList, Node } from \"../lib/DoubleLinkedList\";\r\n\r\ntype Track = {\r\n  id: string;\r\n  name: string;\r\n  artist_name: string;\r\n  audio: string;\r\n  audiodownload_allowed?: boolean;\r\n};\r\n\r\nexport default function Player() {\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState<Track[]>([]);\r\n  const playlistRef = useRef(new DoubleLinkedList<Track>());\r\n  const [currentNode, setCurrentNode] = useState<Node<Track> | null>(null);\r\n  const [, forceUpdate] = useState({}); // para refrescar UI\r\n\r\n  async function search() {\r\n    const r = await fetch(`/api/search?q=${encodeURIComponent(query)}`);\r\n    const data = await r.json();\r\n    const tracks: Track[] = data.results.map((t: any) => ({\r\n      id: t.id,\r\n      name: t.name,\r\n      artist_name: t.artist_name,\r\n      audio: t.audio,\r\n      audiodownload_allowed: t.audiodownload_allowed,\r\n    }));\r\n    setResults(tracks);\r\n  }\r\n\r\n  function addToQueue(track: Track) {\r\n    const node = playlistRef.current.push(track);\r\n    if (!currentNode) {\r\n      setCurrentNode(node);\r\n      playNode(node);\r\n    } else {\r\n      forceUpdate({});\r\n    }\r\n  }\r\n\r\n  function playNode(node: Node<Track>) {\r\n    setCurrentNode(node);\r\n    if (!audioRef.current) audioRef.current = new Audio();\r\n    const audioEl = audioRef.current;\r\n    audioEl.src = node.value.audio;\r\n    audioEl.play();\r\n    audioEl.onended = () => {\r\n      if (node.next) playNode(node.next);\r\n      else setCurrentNode(null);\r\n    };\r\n  }\r\n\r\n  function playNext() {\r\n    if (currentNode?.next) playNode(currentNode.next);\r\n  }\r\n  function playPrev() {\r\n    if (currentNode?.prev) playNode(currentNode.prev);\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-2\">Reproductor</h1>\r\n\r\n      <div className=\"flex gap-2 mb-4\">\r\n        <input\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"Buscar en Jamendo\"\r\n          className=\"border p-1 flex-1\"\r\n        />\r\n        <button onClick={search} className=\"bg-blue-500 text-white px-3 rounded\">\r\n          Buscar\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        {results.map((r) => (\r\n          <div key={r.id} className=\"flex items-center justify-between border-b py-1\">\r\n            <span>{r.name} — {r.artist_name}</span>\r\n            <button onClick={() => addToQueue(r)} className=\"text-sm bg-green-500 text-white px-2 rounded\">\r\n              ➕ Cola\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"p-2 border rounded\">\r\n        <h3 className=\"font-semibold\">Reproduciendo:</h3>\r\n        {currentNode ? (\r\n          <div>\r\n            <div>{currentNode.value.name} — {currentNode.value.artist_name}</div>\r\n            <div className=\"flex gap-2 mt-2\">\r\n              <button onClick={playPrev} disabled={!currentNode.prev} className=\"bg-gray-500 text-white px-2 rounded\">\r\n                ◀ Prev\r\n              </button>\r\n              <button\r\n                onClick={() =>\r\n                  audioRef.current?.paused ? audioRef.current?.play() : audioRef.current?.pause()\r\n                }\r\n                className=\"bg-blue-500 text-white px-2 rounded\"\r\n              >\r\n                {audioRef.current?.paused ? \"Play\" : \"Pause\"}\r\n              </button>\r\n              <button onClick={playNext} disabled={!currentNode.next} className=\"bg-gray-500 text-white px-2 rounded\">\r\n                Next ▶\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>No hay canciones en la cola</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/edben/OneDrive/Desktop/codigos/js/tone-static/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,2IACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}}]
}